test_configuration:
    start_phase: 0

    initial_jpos: [0., -0.1, -0.9, 1.7, 0.71, 0., 0.08, -0.9, 1.7, 0.71]

    body_height: 0.98
    com_height_for_omega: 1.0

    jpos_initialization_time: 0.15
    com_lifting_time: 0.15


    swing_time: 0.33
    st_transition_time: 0.03
    end_transition_time: 0.03
    stance_time: 0.01

    replanning: true
    #replanning: false
    transition_phase_mix_ratio: 0.2
    double_stance_mix_ratio: 0.0
    contact_switch_check: true
    #contact_switch_check: false

    walking_start_time: 5
    walking_velocity_lb: [-0.1, -0.1]
    walking_velocity_ub: [0.1, 0.1]

    protocol:
        ip_control_pc: "localhost"
        ip_sub_pub_prefix: "tcp://127.0.0.1:50"
        ip_req_rep_prefix: "tcp://127.0.0.1:51"
        #username: 'junhyeokahn'
        username: 'junhyeok'
        execute_cmd: "cd ~/Repository/PnC/build/bin && ./run_draco"
        exit_cmd: "pkill -f 'draco"

    # ==========================================================================
    # Observation \in R^{9}
    # [ com_x, com_y, com_z,
    #   com_roll, com_pitch, com_yaw,
    #   com_vx, com_vy, com_vz,
    #   target_x, target_y, target_xdot, target_ydot]
    # ==========================================================================
    obs_lower_bound: [-100. , -100. , -100. , -100. , -100. , -100. , -100. , -100. , -100. , -100. , -100. , -100. , -100.]
    obs_upper_bound: [100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.  , 100.]

    # ==========================================================================
    # Action \in R^{2}
    # [foot x, foot y]
    # ==========================================================================
    action_lower_bound: [-1, -1]
    action_upper_bound: [1, 1]
    action_scale: [0.1, 0.05]

    # ======================================================================
    # Terminate condition
    # ======================================================================
    terminate_obs_lower_bound: [-0.35 , -0.35 , -0.05 , -0.51 , -0.51 , -0.51 , -0.6 , -0.6 , -0.25 , -100. , -100. , -100. , -100.]
    terminate_obs_upper_bound: [0.35  , 0.35  , 0.05  , 0.51  , 0.51  , 0.51  , 0.6  , 0.6  , 0.25  , 100.  , 100.  , 100.  , 100.]

control_configuration:

    joint_position_ctrl:
        kp: [100 , 100 , 100 , 100 , 50. , 100 , 100 , 100 , 100 , 50. ]
        kd: [3   , 3   , 3   , 3   , 1.   , 3   , 3   , 3   , 3   , 1.  ]

    double_contact_trans_ctrl:
        max_rf_z: 300.0
        min_rf_z: 5.0

        kp: [ 150 , 150 , 150 , 150 , 5 , 150 , 150 , 150 , 150 , 5 ]
        kd: [ 8   , 8   , 8   , 8   , 0 , 8   , 8   , 8   , 8   , 0 ]

    body_ctrl:
        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

    single_contact_trans_ctrl:
        max_rf_z: 550
        min_rf_z: 0

        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

    left_body_foot_learning_ctrl:
        planner_name: velocity_reversal_lipm
        swing_height: 0.17
        push_down_height: 0.0
        default_target_foot_location: [0.0, 0.15, 0.0]

        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

        body_pt_offset: [0.0, 0.0]
        foot_landing_offset: [0., 0.]

        fin_ankle: 1.4
        switch_vel_threshold: -2.8

        fin_foot_z_vel: -0.5
        fin_foot_z_acc: 5.0

        # rl parameters
        quad_input_penalty: 1.0
        alive_reward: 5.0
        deviation_penalty: 1.0
        reward_scale: 1.0

    right_body_foot_learning_ctrl:
        planner_name: velocity_reversal_lipm
        swing_height: 0.17
        push_down_height: 0.0
        default_target_foot_location: [0.0, -0.15, 0.0]

        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

        body_pt_offset: [0.0, 0.0]
        foot_landing_offset: [0., 0.]

        fin_ankle: 1.4
        switch_vel_threshold: -2.8

        fin_foot_z_vel: -0.5
        fin_foot_z_acc: 5.0

        # rl parameters
        quad_input_penalty: 1.0
        alive_reward: 5.0
        deviation_penalty: 1.0
        reward_scale: 1.0

    right_body_foot_policy_ctrl:
        planner_name: velocity_reversal_lipm
        swing_height: 0.17
        push_down_height: 0.0
        default_target_foot_location: [0.0, -0.15, 0.0]

        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

        body_pt_offset: [0.0, 0.0]
        foot_landing_offset: [0., 0.]

        fin_ankle: 1.4
        switch_vel_threshold: -2.8

        fin_foot_z_vel: -0.5
        fin_foot_z_acc: 5.0

        # policy path
        #model_path: "RLData/DracoSeperateProcess/ppo_1/checkpoints/00135.yaml"
        #model_path: "ReinforcementLearning/PrecompiledData/DracoSeperateProcess/ppo_6/checkpoints/00100.yaml"
        model_path: "ReinforcementLearning/PrecompiledData/DracoSeperateProcess/walking/checkpoints/00135.yaml"

    left_body_foot_policy_ctrl:
        planner_name: velocity_reversal_lipm
        swing_height: 0.17
        push_down_height: 0.0
        default_target_foot_location: [0.0, 0.15, 0.0]

        kp: [100 , 200 , 200 , 200 , 10 , 100 , 200 , 200 , 200 , 10 ]
        kd: [10  , 20  , 20  , 20  , 1  , 10  , 20  , 20  , 20  , 1  ]

        body_pt_offset: [0.0, 0.0]
        foot_landing_offset: [0., 0.]

        fin_ankle: 1.4
        switch_vel_threshold: -2.8

        fin_foot_z_vel: -0.5
        fin_foot_z_acc: 5.0

        # policy path
        #model_path: "RLData/DracoSeperateProcess/ppo_1/checkpoints/00135.yaml"
        #model_path: "ReinforcementLearning/PrecompiledData/DracoSeperateProcess/ppo_6/checkpoints/00100.yaml"
        model_path: "ReinforcementLearning/PrecompiledData/DracoSeperateProcess/walking/checkpoints/00135.yaml"

planner_configuration:

    velocity_reversal_pln:
        x_step_length_limit: [-0.6, 0.6]
        y_step_length_limit: [0.20, 0.70]
        com_velocity_limit: [0.0, 1.3]
        t_prime: [0.20 , 0.22]
        kappa: [-0.20, -0.20]
